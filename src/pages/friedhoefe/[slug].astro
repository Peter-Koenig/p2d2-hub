---
// src/pages/friedhoefe/[slug].astro
import BaseLayout from "../../layouts/BaseLayout.astro";
import MapCanvas from "../../components/MapCanvas.astro";

// Koordinaten für Rheinkassel (Beispielwerte, EPSG:25832)
const friedhofe = [
    {
        slug: "rheinkassel",
        name: "Friedhof Rheinkassel",
        e: 354123.45,
        n: 5646789.01,
        zoom: 16,
    },
    // Weitere Friedhöfe hier ergänzen
];

const { slug } = Astro.params;
const friedhof = friedhofe.find((f) => f.slug === slug);
---

<BaseLayout title={friedhof?.name || "Friedhof"}>
    <main class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-6">{friedhof?.name}</h1>
        <div class="h-[600px] w-full rounded-xl overflow-hidden shadow-lg">
            <MapCanvas e={friedhof?.e} n={friedhof?.n} zoom={friedhof?.zoom} />
        </div>
    </main>
</BaseLayout>

<!-- Script für Kartenzentrierung (falls nicht in MapCanvas.astro integriert) -->
<script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
        if (window.map && typeof friedhof !== "undefined") {
            window.map.getView().animate({
                center: [friedhof.e, friedhof.n],
                zoom: friedhof.zoom,
                duration: 800,
            });
        }
    });
</script>
